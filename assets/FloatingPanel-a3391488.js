import{d as W,r as o,c as Y,ak as F,aM as N,a as u,b as m,J as k,K as L,g as r,t as P,f as y,e as C,U as T,aN as A,n as U,R as I,o as s,aO as V,aP as O,aQ as q,ab as J,h as K,_ as Q}from"./index-d3ba714e.js";const Z={class:"panel-title-section"},j={class:"panel-title"},G={key:1,class:"panel-subtitle"},ee={class:"panel-controls"},te=["title"],ne=W({__name:"FloatingPanel",props:{title:{},subtitle:{},icon:{},closable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},width:{},height:{},minWidth:{default:200},minHeight:{default:100},maxWidth:{default:800},maxHeight:{default:600},initialPosition:{default:()=>({x:100,y:100})},zIndex:{default:100},collapsible:{type:Boolean,default:!0},initiallyMinimized:{type:Boolean,default:!1}},emits:["close","positionChange","sizeChange","minimize"],setup(D,{emit:$}){const t=D,x=$,n=o(t.initiallyMinimized),v=o(!1),p=o(!1),a=o({x:t.initialPosition.x,y:t.initialPosition.y}),h=o(t.width||300),f=o(t.height||400),z=o({x:0,y:0}),c=o({x:0,y:0,width:0,height:0}),H=Y(()=>({maxHeight:n.value?"0":`${f.value-40}px`}));function B(){n.value=!n.value,x("minimize",n.value)}function S(e){const i=Array.from(document.querySelectorAll(".floating-panel")),l=Math.max(...i.map(g=>parseInt(g.style.zIndex)||t.zIndex||100)),d=e.currentTarget;d&&(d.style.zIndex=String(Math.max(l+1,(t.zIndex||100)+1)))}function X(e){e.target instanceof HTMLElement&&e.target.closest(".panel-control-btn")||(e.preventDefault(),R(e))}function R(e){v.value=!0,z.value={x:e.clientX-a.value.x,y:e.clientY-a.value.y},document.addEventListener("mousemove",b),document.addEventListener("mouseup",w)}function b(e){if(!v.value)return;const i=Math.max(0,Math.min(window.innerWidth-h.value,e.clientX-z.value.x)),l=Math.max(0,Math.min(window.innerHeight-40,e.clientY-z.value.y));a.value={x:i,y:l},x("positionChange",{...a.value})}function w(){v.value=!1,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w)}function E(e){t.resizable&&(e.preventDefault(),e.stopPropagation(),p.value=!0,c.value={x:e.clientX,y:e.clientY,width:h.value,height:f.value},document.addEventListener("mousemove",M),document.addEventListener("mouseup",_))}function M(e){if(!p.value)return;const i=e.clientX-c.value.x,l=e.clientY-c.value.y,d=Math.max(t.minWidth,Math.min(t.maxWidth,c.value.width+i)),g=Math.max(t.minHeight,Math.min(t.maxHeight,c.value.height+l));h.value=d,f.value=g,x("sizeChange",{width:d,height:g})}function _(){p.value=!1,document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",_)}return F(()=>{t.initialPosition&&(a.value={x:t.initialPosition.x,y:t.initialPosition.y})}),N(()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",_)}),(e,i)=>(s(),u("div",{class:U(["floating-panel",{"is-minimized":n.value,"is-dragging":v.value,"is-resizing":p.value}]),style:I({transform:`translate(${a.value.x}px, ${a.value.y}px)`,width:`${h.value}px`,height:`${f.value}px`,"z-index":e.zIndex,"--position-x":`${a.value.x}px`,"--position-y":`${a.value.y}px`}),onMousedown:S},[m("div",{class:"panel-header",onMousedown:X},[m("div",Z,[e.icon?(s(),k(L(e.icon),{key:0,class:"panel-icon"})):r("",!0),m("span",j,P(e.title),1),e.subtitle?(s(),u("span",G,P(e.subtitle),1)):r("",!0)]),m("div",ee,[m("button",{onClick:B,class:"panel-control-btn minimize-btn",title:n.value?"Expand":"Collapse"},[(s(),k(L(n.value?y(V):y(O)),{class:"control-icon"}))],8,te),e.resizable?(s(),u("button",{key:0,onMousedown:E,class:"panel-control-btn resize-btn",title:"Resize"},[C(y(q),{class:"control-icon"})],32)):r("",!0),e.closable?(s(),u("button",{key:1,onClick:i[0]||(i[0]=l=>e.$emit("close")),class:"panel-control-btn close-btn",title:"Close"},[C(y(J),{class:"control-icon"})])):r("",!0)])],32),C(A,{name:"panel-content",appear:""},{default:T(()=>[n.value?r("",!0):(s(),u("div",{key:0,class:"panel-content",style:I(H.value)},[K(e.$slots,"default",{},void 0,!0)],4))]),_:3}),e.resizable&&!n.value?(s(),u("div",{key:0,class:"resize-handle",onMousedown:E},null,32)):r("",!0)],38))}});const ie=Q(ne,[["__scopeId","data-v-14202f2c"]]);export{ie as F};
